<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <title>Document</title>
</head>

<body>
<a href="./mapBoxSandBox.html">map box sandbox with us population density</a>


  <div id="covidTracker"></div>
  

<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
  crossorigin="anonymous"></script>


<div id="map"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script src="assets/countyCensus.js"></script>
<script>
  document.getElementById('btn').addEventListener('click', event => {
      event.preventDefault()

      let searchC = document.getElementById('countySearch').value
      let searchS = document.getElementById('stateSearch').value

  
  countyPop.forEach(county => {
    if (county.County === searchC && county.State === searchS){
      pop = county.Population
      console.log(pop)
    }
  })
 
    axios.get('https://corona.lmao.ninja/v2/jhucsse/counties')
      .then(res => {

        let tracker = res.data
        // console.log(tracker)
        
        tracker.forEach(county => {
          if (county.county === searchC && county.province === searchS){
            cases = county.stats.confirmed
            console.log(cases)
          }
        })
        
        console.log(cases)
        rate = cases/pop*100000
        // console.log(rate)
        document.getElementById('county').innerHTML = `${searchC} county, ${searchS}`

        document.getElementById('caseRate').innerHTML = `${rate} cases per 100,000 people`


        document.getElementById('stateSearch').value = ''
        document.getElementById('countySearch').value = ''

      }) 
  })
 
 


</script>
</body>

</html>